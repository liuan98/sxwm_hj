(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["plugins/advance/detail/detail"],{"19de":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=(t._self._c,{attr_list:t.select_attr_group}),i=Number(110),a=Number(110);t._isMounted||(t.e0=function(e){t.active=!1}),t.$mp.data=Object.assign({},{$root:{a0:n,m0:i,m1:a}})},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},3510:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(n,!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(){return n.e("components/page-component/goods/app-goods-banner").then(n.bind(null,"12b6"))},p=function(){return n.e("plugins/advance/components/detail-ad").then(n.bind(null,"e0a52"))},c=function(){return n.e("components/basic-component/app-iphone-x/app-iphone-x").then(n.bind(null,"7598"))},d=function(){return n.e("components/page-component/goods/app-goods-detail").then(n.bind(null,"5abf"))},l=function(){return n.e("plugins/advance/components/detail-price-share").then(n.bind(null,"fe3c"))},u=function(){return Promise.all([n.e("common/vendor"),n.e("plugins/advance/components/detail-bottom-button")]).then(n.bind(null,"5c91"))},m=function(){return n.e("components/basic-component/app-empty-bottom/app-empty-bottom").then(n.bind(null,"0c06"))},h=function(){return n.e("plugins/advance/components/detail-attr").then(n.bind(null,"f471"))},g=function(){return n.e("components/page-component/app-join-member/app-join-member").then(n.bind(null,"40f4"))},_=function(){return n.e("components/page-component/goods/app-goods-service").then(n.bind(null,"311c"))},f=function(){return n.e("components/page-component/app-related-suggestion-product/app-related-suggestion-product").then(n.bind(null,"1ce4"))},v=function(){return n.e("plugins/advance/components/detail-discount").then(n.bind(null,"c54f"))},b=function(){return n.e("plugins/advance/components/detail-vip").then(n.bind(null,"526f"))},w=function(){return n.e("components/page-component/app-vip-card/app-vip-card").then(n.bind(null,"19f0"))},y=function(){return n.e("components/page-component/app-goods-detail/app-name").then(n.bind(null,"1caa"))},O=function(){return Promise.all([n.e("common/vendor"),n.e("components/page-component/app-quick-navigation/app-quick-navigation")]).then(n.bind(null,"4d92"))},j=function(){return n.e("components/page-component/goods/app-goods-attr").then(n.bind(null,"9dc1"))},k=function(){return n.e("components/page-component/goods/app-goods-marketing").then(n.bind(null,"1143"))},$={name:"detail",data:function(){return{detail:{},active:!0,attr_deposit:"0",attr_swell_deposit:"0",attr_stock:0,attr_price:"0",attr_price_member:0,url:"",level_show:0,loading:!1,select_attr_group:[],zhe:!1,list:[],num:1,shareShow:!1,attr_pic_url:"",goods_id:-1,d:0,h:0,m:0,s:0,end_time:-1}},onLoad:function(t){this.goods_id=t.id},onShow:function(){var e=this;this.$nextTick(function(){e.request_detail({id:e.goods_id}),e.$request({url:e.$api.advance.goods_list,data:{goods_id:e.goods_id}}).then(function(n){0===n.code?e.list=n.data.list:1===n.code&&t.showModal({title:"提示",content:n.msg})})})},onHide:function(){clearInterval(this.end_time)},onUnload:function(){clearInterval(this.end_time)},methods:{request_detail:function(e){var n=this;t.showLoading({title:"加载中"}),this.$request({url:this.$api.advance.detail,data:{id:e.id},method:"get"}).then(function(e){0===e.code?(t.hideLoading(),n.detail=e.data.detail,n.detail.num=1,n.loading=!0,n.url="".concat(n.$api.advance.poster,"&goods_id=").concat(n.detail.id),n.getTime(n.detail.advanceGoods.end_prepayment_at),n.set_attr_active()):1===e.code&&t.showModal({title:"提示",content:e.msg})})},open_share:function(){this.shareShow=!0},change_num:function(t){this.num+=t},change_num_data:function(t){this.num=t},favorite:function(t){this.detail.favorite=t},select_attr:function(t,e){for(var n=this.detail.attr_groups,i=":",a=0,o=0;o<n.length;o++)for(var r=this.detail.attr_groups[o].attr_list,s=0;s<r.length;s++)n[o].attr_group_id===t&&r[s].attr_id===e?this.$set(this.detail.attr_groups[o].attr_list[s],"active",!0):n[o].attr_group_id===t&&r[s].attr_id!==e&&this.$set(this.detail.attr_groups[o].attr_list[s],"active",!1),this.detail.attr_groups[o].attr_list[s].active&&(a=this.detail.attr_groups[o].attr_list[s].attr_id,i+=":".concat(a));var p=i.substr(2);this.get_price_stock(p)},set_attr_active:function(){for(var t=0,e=":",n=0;n<this.detail.attr_groups.length;n++)for(var i=0;i<this.detail.attr_groups[n].attr_list.length;i++)0!==i?this.$set(this.detail.attr_groups[n].attr_list[i],"active",!1):0===i&&(t=this.detail.attr_groups[n].attr_list[i].attr_id,e+=":".concat(t),this.$set(this.detail.attr_groups[n].attr_list[i],"active",!0));this.get_price_stock(e.substr(2))},get_price_stock:function(t){for(var e=this.detail.attr,n=0;n<e.length;n++)if(e[n].sign_id===t){this.select_attr_group=e[n].attr_list;var i=e[n],a=i.deposit,o=i.swell_deposit,r=i.stock,s=i.price,p=i.price_member,c=i.pic_url;this.attr_deposit=a,this.attr_swell_deposit=o,this.attr_stock=r,this.attr_price=s,this.attr_price_member=p,this.attr_pic_url=c}},close_attr:function(t){this.active=t},getTime:function(t){var e=this,n=new Date(t.replace(/-/g,"/")).getTime()-(new Date).getTime();console.log(t),this.d=parseInt(n/1e3/60/60/24),this.h=parseInt(n/1e3/60/60%24),this.m=parseInt(n/1e3/60%60),this.s=parseInt(n/1e3%60),this.end_time=setInterval(function(){var n=(new Date).getTime(),i=new Date(t.replace(/-/g,"/")).getTime(),a=i-n;if(a>0){var o=parseInt(a/1e3/60/60/24),r=parseInt(a/1e3/60/60%24),s=parseInt(a/1e3/60%60),p=parseInt(a/1e3%60);e.d=o,e.h=r,e.m=s,e.s=p}else clearInterval(e.end_time)},1e3)}},components:{"app-goods-banner":s,"detail-ad":p,"app-iphone-x":c,"app-goods-detail":d,"detail-price-share":l,"detail-bottom-button":u,"app-empty-bottom":m,"detail-attr":h,"app-join-member":g,"app-goods-service":_,"app-related-suggestion-product":f,"detail-discount":v,"detail-vip":b,"app-name":y,"app-vip-card":w,"app-quick-navigation":O,"app-goods-attr":j,"app-goods-marketing":k},computed:o({},(0,i.mapGetters)("mallConfig",{vip:"getVip"}),{},(0,i.mapGetters)("user",{is_vip:"is_vip"}),{},(0,i.mapState)({mall:function(t){return t.mallConfig.mall}})),onShareAppMessage:function(){return this.$shareAppMessage({path:"/plugins/advance/detail/detail",title:this.detail.app_share_title?this.detail.app_share_title:this.detail.name,imageUrl:this.detail.app_share_pic?this.detail.app_share_pic:"",params:{id:this.detail.id}})}};e.default=$}).call(this,n("c11b")["default"])},"3ab6":function(t,e,n){"use strict";n.r(e);var i=n("19de"),a=n("e0cd");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("a565");var r=n("2877"),s=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"2acb4700",null);e["default"]=s.exports},8500:function(t,e,n){},a565:function(t,e,n){"use strict";var i=n("8500"),a=n.n(i);a.a},e0cd:function(t,e,n){"use strict";n.r(e);var i=n("3510"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a}},[["ba56","common/runtime","common/vendor"]]]);