(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["plugins/mch/mch/config/config"],{"2ae3":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},"45ff":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){return i.e("components/page-component/app-area-picker/app-area-picker").then(i.bind(null,"8e44"))},o={name:"config",components:{appAreaPicker:a},data:function(){return{mch_id:-1,category_list:[],area:{province_id:0,city_id:0,district_id:0},form:{},form_data:{}}},onLoad:function(t){this.mch_id=t.mch_id,this.getCategory()},methods:{getCategory:function(){var t=this;t.$request({url:t.$api.mch.category,data:{id:t.mch_id}}).then(function(e){0===e.code&&(t.category_list=e.data.list,t.loadData())})},loadData:function(){var t=this;t.$showLoading(),t.$request({url:t.$api.mch.detail,data:{id:t.mch_id,review_status:1}}).then(function(e){if(t.$hideLoading(),0===e.code){var i=e.data.detail,a="",o=0;t.category_list.map(function(t,e){t.id==i.mch_common_cat_id&&(a=t.name,o=e)}),t.form={id:i.id,realname:i.realname,mobile:i.mobile,wechat:i.wechat,address:i.store.address,name:i.store.name,service_mobile:i.store.mobile,mch_common_cat_str:a,mch_common_cat_key:o,mch_common_cat_id:i.mch_common_cat_id,cover_url:i.store.cover_url,username:i.mchUser.username,pic_url:i.store.pic_url.length>0?i.store.pic_url[0].pic_url:"",form_data:i.form_data},t.area={province_id:i.store.province_id,city_id:i.store.city_id,district_id:i.store.district_id}}})},navPassword:function(){t.navigateTo({url:"/plugins/mch/mch/password/password?mch_id="+this.mch_id})},applyInput:function(t){var e=t.currentTarget.dataset.type;this.form[e]=t.detail.value},categoryChange:function(t){var e=this.category_list[t.detail.value];this.form.mch_common_cat_id=e.id,this.form.mch_common_cat_str=e.name,this.form.mch_common_cat_key=t.detail.value},areaEvent:function(t){t&&(this.area.province_id=t.province.id,this.area.city_id=t.city.id,this.area.district_id=t.district.id)},uploadCoverUrl:function(e){var i=this;t.chooseImage({count:1,success:function(e){t.uploadFile({url:i.$api.upload.file,filePath:e.tempFilePaths[0],name:"file",formData:{file:e.tempFilePaths[0]},success:function(e){var a=JSON.parse(e.data);0===a.code?(i.form.cover_url=a.data.url,t.showToast({title:"上传成功"})):t.showToast({icon:"none",title:a.msg})}})}})},uploadPicUrl:function(e){var i=this;t.chooseImage({count:1,success:function(e){t.uploadFile({url:i.$api.upload.file,filePath:e.tempFilePaths[0],name:"file",formData:{file:e.tempFilePaths[0]},success:function(e){var a=JSON.parse(e.data);0===a.code?(i.form.pic_url=a.data.url,i.form.pic_url_id=a.data.id,t.showToast({title:"上传成功"})):t.showToast({icon:"none",title:a.msg})},file:function(t){console.error(t)}})},fail:function(t){console.error(t)}})},formSubmit:function(e){var i=this,a=i.form,o=i.area,c=function(){return a.realname?a.mobile?a.username?a.mch_common_cat_id?!a.name&&"店铺名称不能为空":"类目不能为空":"账号不能为空":"联系电话不能为空":"联系人不能为空"}();c?t.showToast({icon:"none",title:c}):(i.$showLoading({title:"保存中"}),i.$request({url:i.$api.mch.apply,data:{id:a.id,mch_common_cat_id:a.mch_common_cat_id,address:a.address,username:a.username,name:a.name,service_mobile:a.service_mobile,realname:a.realname,mobile:a.mobile,wechat:a.wechat,form_data:JSON.stringify(a.form_data),province_id:o.province_id,city_id:o.city_id,district_id:o.district_id,logo:a.cover_url,bg_pic_url:JSON.stringify({pic_url:a.pic_url,id:a.pic_url_id})},method:"POST"}).then(function(e){i.$hideLoading(),0===e.code?t.showModal({title:"提示",content:e.msg,showCancel:!1,success:function(e){e.confirm&&t.navigateBack({delta:1})}}):t.showToast({icon:"none",title:e.msg})}))}}};e.default=o}).call(this,i("c11b")["default"])},"7ed3":function(t,e,i){},a84f:function(t,e,i){"use strict";var a=i("f776"),o=i.n(a);o.a},b928:function(t,e,i){"use strict";var a=i("7ed3"),o=i.n(a);o.a},c97c:function(t,e,i){"use strict";i.r(e);var a=i("45ff"),o=i.n(a);for(var c in a)"default"!==c&&function(t){i.d(e,t,function(){return a[t]})}(c);e["default"]=o.a},e6ce:function(t,e,i){"use strict";i.r(e);var a=i("2ae3"),o=i("c97c");for(var c in o)"default"!==c&&function(t){i.d(e,t,function(){return o[t]})}(c);i("b928"),i("a84f");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"3dbfaca8",null);e["default"]=r.exports},f776:function(t,e,i){}},[["0752","common/runtime","common/vendor"]]]);