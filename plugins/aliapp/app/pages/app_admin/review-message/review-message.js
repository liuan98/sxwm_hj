(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/app_admin/review-message/review-message"],{"260f":function(t,e,i){"use strict";i.r(e);var s=i("807b"),n=i.n(s);for(var r in s)"default"!==r&&function(t){i.d(e,t,function(){return s[t]})}(r);e["default"]=n.a},4732:function(t,e,i){"use strict";i.r(e);var s=i("ddba"),n=i("260f");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("fdfd");var o=i("2877"),a=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,"258a07b1",null);e["default"]=a.exports},"807b":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("a34a"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i,s,n,r,o){try{var a=t[r](o),h=a.value}catch(u){return void i(u)}a.done?e(h):Promise.resolve(h).then(s,n)}function o(t){return function(){var e=this,i=arguments;return new Promise(function(s,n){var o=t.apply(e,i);function a(t){r(o,s,n,a,h,"next",t)}function h(t){r(o,s,n,a,h,"throw",t)}a(void 0)})}}function a(t){return c(t)||u(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}var l={name:"review-message",data:function(){return{type:1,mch:"0",share:"0",bonus:"0",stock:"0",over:!1,titleShow:!1,list:[],getFocus:!1,keyword:"",searchBool:!1,modelType:1,reasonRefusal:"",setItem:{},model:!1,page:1}},onLoad:function(e){var i=this;this.mch=e.mch,this.share=e.share,this.bonus=e.bonus,this.stock=e.stock,"1"===this.mch&&("1"===this.share||"1"===this.bonus||"1"===this.stock?this.titleShow=!0:t.setNavigationBarTitle({title:"多商户审核消息"})),"1"===this.share&&("1"===this.mch||"1"===this.bonus||"1"===this.stock?(this.titleShow=!0,"0"===this.mch&&(this.type=2)):(this.type=2,t.setNavigationBarTitle({title:"分销商审核消息"}))),"1"===this.bonus&&("1"===this.mch||"1"===this.share||"1"===this.stock?(this.titleShow=!0,"0"===this.share&&"0"===this.mch&&(this.type=3)):(this.type=3,t.setNavigationBarTitle({title:"团队分红审核消息"}))),"1"===this.stock&&("1"===this.mch||"1"===this.bonus||"1"===this.share?this.titleShow=!0:(this.type=4,t.setNavigationBarTitle({title:"股东分红审核消息"}))),this.request({type:this.type,page:1,keyword:""}).then(function(t){t&&(i.list=t.list)})},onReachBottom:function(){var t=this;this.over||(this.page++,this.request({type:this.type,page:this.page,keyword:this.keyword}).then(function(e){console.log(e),e&&e.list.length>0?t.list=[].concat(a(t.list),a(e.list)):e&&0===e.list.length&&(t.over=!0)}))},onShow:function(){var t=this;this.request({type:this.type,page:1,keyword:""}).then(function(e){e&&(t.list=e.list)})},methods:{blurFocus:function(){var t=this;setTimeout(function(e){t.getFocus=!1,t.searchText()},300)},clearSearch:function(){this.keyword=""},changeType:function(t){var e=this;this.list=[],this.page=1,this.type=t,this.over=!1,this.keyword="",this.searchBool=!1,this.request({type:t,page:this.page,keyword:this.keyword}).then(function(t){t&&(e.list=t.list)})},request:function(){var t=o(s.default.mark(function t(e){var i,n,r,o;return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.type,n=e.page,r=e.keyword,t.next=3,this.$request({url:this.$api.app_admin.review,data:{type:i,page:n,keyword:r}});case 3:if(o=t.sent,0!==o.code){t.next=8;break}return t.abrupt("return",o.data);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),checkQueue:function(t){var e=this;this.$request({url:this.$api.app_admin.queue,data:{queue_id:t}}).then(function(i){if(i.retry&&1==i.retry)e.checkQueue(t);else for(var s=0;s<e.list.length;s++)e.list[s].id===e.setItem.id&&(e.$delete(e.list,s),e.model=!1,e.setItem={})})},searchText:function(){var t=this;console.log(2),""===this.keyword&&(this.searchBool=!1),this.page=1,this.over=!1,this.request({type:this.type,page:this.page,keyword:this.keyword}).then(function(e){e&&(t.list=e.list)})},refuse:function(t){this.setItem=t,this.modelType=1,this.model=!0},by:function(t){this.setItem=t,this.modelType=2,this.model=!0},confirm:function(){var e=this;2===this.modelType?this.$request({url:this.$api.app_admin.review_switch,method:"post",data:{type:this.type,status:1,form:JSON.stringify(this.setItem),user_id:this.setItem.user_id}}).then(function(t){if(0===t.code)if(3==e.type)e.checkQueue(t.data.queue_id);else for(var i=0;i<e.list.length;i++)e.list[i].id===e.setItem.id&&(e.$delete(e.list,i),e.model=!1,e.setItem={})}):1===this.modelType&&(this.setItem.review_remark=this.reasonRefusal,this.$request({url:this.$api.app_admin.review_switch,method:"post",data:{type:this.type,status:2,form:JSON.stringify(this.setItem),reason:this.reasonRefusal,user_id:this.setItem.user_id}}).then(function(i){if(0===i.code){e.reasonRefusal="";for(var s=0;s<e.list.length;s++)e.list[s].id===e.setItem.id&&(e.$delete(e.list,s),e.model=!1,e.setItem={})}else t.showToast({title:i.msg,icon:"none",duration:1e3})}))},cancel:function(){this.model=!1,this.setItem={}}}};e.default=l}).call(this,i("c11b")["default"])},ddba:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.searchBool=!0},t.e1=function(e){t.getFocus=!0})},n=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return n})},ea95:function(t,e,i){},fdfd:function(t,e,i){"use strict";var s=i("ea95"),n=i.n(s);n.a}},[["8afb","common/runtime","common/vendor"]]]);