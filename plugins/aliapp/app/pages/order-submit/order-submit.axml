<app-layout vue-id="1" class="data-v-ee1dc79e" onVueInit="__l"><block a:if="{{previewData}}"><view class="page data-v-ee1dc79e"><block a:if="{{previewData.show_address!==false}}"><block a:if="{{previewData.allZiti}}"><view class="address data-v-ee1dc79e"><app-order-submit-row vue-id="{{('2')+','+('1')}}" show-nav="{{false}}" no-padding="{{true}}" class="data-v-ee1dc79e" onVueInit="__l"><view class="dir-left-nowrap px-12 data-v-ee1dc79e"><view class="box-grow-1 data-v-ee1dc79e"><app-input onInput="__e" vue-id="{{('3')+','+('2')}}" placeholder="请填写联系人" height="100" value="{{previewData.address.name}}" data-event-opts="{{[['^input',[['__set_model',['$0','name','$event',[]],['previewData.address']]]]]}}" class="data-v-ee1dc79e" onVueInit="__l"></app-input></view><view class="box-grow-1 data-v-ee1dc79e"><app-input onInput="__e" vue-id="{{('4')+','+('2')}}" placeholder="请填写手机号" height="100" value="{{previewData.address.mobile}}" data-event-opts="{{[['^input',[['__set_model',['$0','mobile','$event',[]],['previewData.address']]]]]}}" class="data-v-ee1dc79e" onVueInit="__l"></app-input></view></view><view slot="footer" class="data-v-ee1dc79e"><image class="bottom-image data-v-ee1dc79e" src="{{appImg.common.address_bottom}}"></image></view></app-order-submit-row></view></block><block a:else><view data-event-opts="{{[['tap',[['navigateAddress',['$event']]]]]}}" class="address data-v-ee1dc79e" onTap="__e"><app-order-submit-row vue-id="{{('5')+','+('1')}}" class="data-v-ee1dc79e" onVueInit="__l"><block a:if="{{previewData.address}}"><view class="data-v-ee1dc79e"><view class="dir-left-nowrap mb-12 data-v-ee1dc79e"><view class="box-grow-1 data-v-ee1dc79e">{{"收货人: "+previewData.address.name}}</view><view class="box-grow-0 data-v-ee1dc79e">{{previewData.address.mobile}}</view></view><view class="mb-12 data-v-ee1dc79e">{{'收货地址:\n                            '+previewData.address.province+"\n                            "+previewData.address.city+"\n                            "+previewData.address.district+"\n                            "+previewData.address.detail+''}}</view></view></block><block a:else><view class="data-v-ee1dc79e">请选择收货地址</view></block><block a:if="{{previewData.has_ziti}}"><view class="{{(('ziti-tip data-v-ee1dc79e')+' '+(theme+'-color'))}}">(收货地址中的手机号码将用于自提信息)</view></block><view slot="footer" class="data-v-ee1dc79e"><image class="bottom-image data-v-ee1dc79e" src="{{appImg.common.address_bottom}}"></image></view></app-order-submit-row></view></block></block><view class="mch-list data-v-ee1dc79e"><block a:for="{{previewData.mch_list}}" a:for-item="mch" a:for-index="mchIndex" a:key="mchIndex"><view class="mch-item data-v-ee1dc79e"><view class="mch-name data-v-ee1dc79e">{{mch.mch.name}}</view><block a:if="{{mch.show_delivery!==false}}"><view class="dir-left-nowrap cross-center delivery data-v-ee1dc79e"><view class="box-grow-1 data-v-ee1dc79e">配送方式</view><view class="box-grow-0 data-v-ee1dc79e"><block a:for="{{mch.delivery.send_type_list}}" a:for-item="sendType" a:for-index="sendTypeIndex" a:key="sendTypeIndex"><view data-event-opts="{{[['tap',[['changeSendType',[mchIndex,'$0'],[[['previewData.mch_list','',mchIndex],['delivery.send_type_list','',sendTypeIndex,'value']]]]]]]}}" class="{{(('send-type data-v-ee1dc79e')+' '+(sendType.value==mch.delivery.send_type?theme+'-background':'weak-two-background'))}}" onTap="__e">{{''+sendType.name+''}}</view></block></view></view></block><block a:if="{{mch.delivery.send_type=='offline'}}"><view class="store data-v-ee1dc79e"><block a:if="{{mch.no_store&&mch.no_store===true}}"><app-order-submit-row vue-id="{{('6-'+mchIndex)+','+('1')}}" show-nav="{{false}}" class="data-v-ee1dc79e" onVueInit="__l">暂无门店，请选择其他配送方式</app-order-submit-row></block><block a:else><app-order-submit-row vue-id="{{('7-'+mchIndex)+','+('1')}}" show-nav="{{mch.mch.id==0}}" data-event-opts="{{[['^click',[['navigateStore',[mchIndex]]]]]}}" onClick="__e" class="data-v-ee1dc79e" onVueInit="__l"><view class="title data-v-ee1dc79e" slot="header">门店信息</view><block a:if="{{mch.store}}"><view class="dir-left-nowrap mb-12 data-v-ee1dc79e"><view class="box-grow-1 data-v-ee1dc79e">{{mch.store.name}}</view><view class="box-grow-0 location data-v-ee1dc79e"><image class="icon data-v-ee1dc79e" src="/static/image/icon/location.png"></image><block a:if="{{getLocationFail}}"><view class="inline-block data-v-ee1dc79e"><view class="inline-block data-v-ee1dc79e">定位失败</view><view data-event-opts="{{[['tap',[['openLocationSetting',['$event']]]]]}}" class="inline-block open-location-setting data-v-ee1dc79e" catchTap="__e"><view class="{{((('open-location-btn data-v-ee1dc79e')+' '+(theme+'-color'))+' '+(theme+'-border'))}}">获取位置</view></view></view></block><block a:else><view class="inline-block data-v-ee1dc79e">{{"距离您"+mch.store.distance}}</view></block></view></view><view class="store-address data-v-ee1dc79e">{{mch.store.address}}</view></block><block a:else><view class="data-v-ee1dc79e">请选择门店</view></block></app-order-submit-row></block></view></block><block a:else><block a:if="{{mch.delivery.send_type=='city'&&mch.city}}"><view class="city data-v-ee1dc79e"><block a:if="{{mch.city.error}}"><view class="dir-left-nowrap cross-center data-v-ee1dc79e"><view class="box-grow-1 t-omit error data-v-ee1dc79e">{{mch.city.error}}</view><view data-event-opts="{{[['tap',[['jump',[mchIndex]]]]]}}" class="box-grow-0 btn data-v-ee1dc79e" onTap="__e">查看配送范围</view></view></block><block a:else><view class="t-omit data-v-ee1dc79e">{{"发货地址："+mch.city.address}}</view><block a:if="{{mch.city.explain}}"><view class="t-omit data-v-ee1dc79e">{{mch.city.explain}}</view></block><view class="dir-left-nowrap cross-center data-v-ee1dc79e"><view class="box-grow-1 t-omit error data-v-ee1dc79e" style="color:#353535;">该地址在配送范围内</view><view data-event-opts="{{[['tap',[['jump',[mchIndex]]]]]}}" class="box-grow-0 btn data-v-ee1dc79e" onTap="__e">查看配送范围</view></view></block></view></block></block><view class="goods-list data-v-ee1dc79e"><block a:for="{{mch.goods_list}}" a:for-item="goodsItem" a:for-index="goodsIndex" a:key="goodsIndex"><view class="dir-left-nowrap goods-item data-v-ee1dc79e"><view class="box-grow-0 data-v-ee1dc79e"><image class="goods-image data-v-ee1dc79e" src="{{goodsItem.goods_attr.pic_url?goodsItem.goods_attr.pic_url:goodsItem.cover_pic}}"></image></view><view class="box-grow-1 data-v-ee1dc79e"><view class="goods-name data-v-ee1dc79e">{{goodsItem.name}}</view><view class="dir-left-wrap attr-list data-v-ee1dc79e"><block a:for="{{goodsItem.attr_list}}" a:for-item="attrItem" a:for-index="attrIndex" a:key="attrIndex"><view class="attr-item data-v-ee1dc79e">{{''+attrItem.attr_group_name+":"+attrItem.attr_name+''}}</view></block></view><view class="dir-left-nowrap data-v-ee1dc79e"><view class="box-grow-1 goods-num data-v-ee1dc79e">{{"×"+goodsItem.num}}</view><view class="{{(('box-grow-0 goods-price-info data-v-ee1dc79e')+' '+(theme+'-color'))}}"><view class="data-v-ee1dc79e"><block a:for="{{goodsItem.custom_currency}}" a:for-item="customCurrency" a:for-index="customCurrencyIndex" a:key="customCurrencyIndex"><text class="data-v-ee1dc79e">{{''+customCurrency+'+'}}</text></block><text class="goods-price-unit data-v-ee1dc79e">￥</text><text class="data-v-ee1dc79e">{{goodsItem.total_original_price}}</text></view><block a:for="{{goodsItem.discounts}}" a:for-item="discount" a:for-index="discountIndex" a:key="discountIndex"><view class="data-v-ee1dc79e">{{''+discount.name+": "+discount.value+''}}</view></block></view></view></view></view></block></view><block a:if="{{mch.insert_rows&&mch.insert_rows.length}}"><block a:for="{{mch.insert_rows}}" a:for-item="insertRow" a:for-index="insertRowIndex" a:key="insertRowIndex"><view class="data-v-ee1dc79e"><app-order-submit-row vue-id="{{('8-'+mchIndex+'-'+insertRowIndex)+','+('1')}}" show-nav="{{false}}" class="data-v-ee1dc79e" onVueInit="__l"><view class="dir-left-nowrap data-v-ee1dc79e"><view class="box-grow-1 data-v-ee1dc79e">{{insertRow.title}}</view><view class="{{(('box-grow-0 data-v-ee1dc79e')+' '+(theme+'-color'))}}">{{insertRow.value}}</view></view></app-order-submit-row></view></block></block><block a:if="{{mch.coupon&&mch.coupon.enabled}}"><view data-event-opts="{{[['tap',[['navigateCoupon',[mchIndex]]]]]}}" class="coupon data-v-ee1dc79e" onTap="__e"><app-order-submit-row vue-id="{{('9-'+mchIndex)+','+('1')}}" class="data-v-ee1dc79e" onVueInit="__l"><view class="dir-left-nowrap data-v-ee1dc79e"><view class="box-grow-1 data-v-ee1dc79e">优惠券</view><block a:if="{{mch.coupon.use}}"><view class="{{(('box-grow-0 data-v-ee1dc79e')+' '+(theme+'-color'))}}">{{'已优惠'+mch.coupon.coupon_discount+'元'}}</view></block><block a:else><view class="box-grow-0 tip data-v-ee1dc79e">选择优惠券</view></block></view></app-order-submit-row></view></block><block a:if="{{mch.integral&&mch.integral.can_use}}"><view class="integral data-v-ee1dc79e"><app-order-submit-row vue-id="{{('10-'+mchIndex)+','+('1')}}" show-nav="{{false}}" class="data-v-ee1dc79e" onVueInit="__l"><view class="dir-left-nowrap data-v-ee1dc79e"><view class="box-grow-1 dir-left-nowrap data-v-ee1dc79e"><view class="data-v-ee1dc79e">{{'使用\n                                    '+mch.integral.use_num+'\n                                    积分抵扣'}}<text class="{{(('data-v-ee1dc79e')+' '+(theme+'-color'))}}">{{mch.integral.deduction_price}}</text>元</view><view data-event-opts="{{[['tap',[['showIntegralTip',['$event']]]]]}}" class="tip-btn data-v-ee1dc79e" onTap="__e"><image class="icon data-v-ee1dc79e" src="/static/image/icon/warning.png"></image></view></view><view class="box-grow-0 data-v-ee1dc79e"><app-radio vue-id="{{('11-'+mchIndex)+','+('10-'+mchIndex)}}" type="round" value="{{mch.integral.use}}" theme="{{theme}}" data-event-opts="{{[['^input',[['changeIntegral',[mchIndex]]]]]}}" onInput="__e" class="data-v-ee1dc79e" onVueInit="__l"></app-radio></view></view></app-order-submit-row></view></block><block a:if="{{mch.show_express_price!==false}}"><view class="data-v-ee1dc79e"><app-order-submit-row vue-id="{{('12-'+mchIndex)+','+('1')}}" show-nav="{{false}}" showBorder="{{false}}" class="data-v-ee1dc79e" onVueInit="__l"><view class="dir-left-nowrap data-v-ee1dc79e"><view class="box-grow-1 data-v-ee1dc79e">运费</view><view class="{{(('box-grow-0 express-price data-v-ee1dc79e')+' '+(theme+'-color'))}}"><block a:if="{{mch.express_price_origin&&mch.express_price_desc}}"><view class="data-v-ee1dc79e">{{"￥"+mch.express_price_origin+"元"}}</view><view class="express-price-desc data-v-ee1dc79e">{{mch.express_price_desc+''}}</view></block><block a:else><view class="data-v-ee1dc79e">{{"￥"+mch.express_price+"元"}}</view></block></view></view></app-order-submit-row></view></block><block a:if="{{mch.order_form&&mch.order_form.status=='1'}}"><view class="data-v-ee1dc79e"><app-diy-form vue-id="{{('13-'+mchIndex)+','+('1')}}" title="{{mch.order_form.name}}" list="{{mch.order_form.value}}" sign="{{mchIndex}}" label-position="top" show-scroll-btn="{{mch.order_form.show_scroll}}" data-event-opts="{{[['^input',[['handleOrderFormInput']]],['^validate',[['handleOrderFormValidate']]]]}}" onInput="__e" onValidate="__e" class="data-v-ee1dc79e" onVueInit="__l"></app-diy-form></view></block><block a:else><block a:if="{{mch.show_remark!==false&&mch.has_goods_form!==true}}"><view class="remark data-v-ee1dc79e"><app-input vue-id="{{('14-'+mchIndex)+','+('1')}}" placeholder="买家留言" height="100" value="{{mch.remark}}" data-event-opts="{{[['^input',[['__set_model',['$0','remark','$event',[]],[[['previewData.mch_list','',mchIndex]]]],['inputRemark',[mchIndex]]]]]}}" onInput="__e" class="data-v-ee1dc79e" onVueInit="__l"></app-input></view></block></block><block a:if="{{mch.has_goods_form}}"><block a:for="{{mch.goods_list}}" a:for-item="goodsItem" a:for-index="goodsIndex" a:key="goodsIndex"><block a:if="{{goodsItem.form&&!goodsItem.form.same_form}}"><view style="margin-bottom:20rpx;" class="data-v-ee1dc79e"><view style="padding:24rpx;color:#666666;" class="data-v-ee1dc79e">{{goodsItem.form.name}}</view><block a:if="{{mch.diff_goods_form_count!==1}}"><view class="goods-list data-v-ee1dc79e"><block a:for="{{mch.goods_list}}" a:for-item="subGoodsItem" a:for-index="subGoodsIndex" a:key="subGoodsIndex"><block a:if="{{subGoodsItem.form&&subGoodsItem.form.id==goodsItem.form.id}}"><view class="dir-left-nowrap goods-item data-v-ee1dc79e"><view class="box-grow-0 data-v-ee1dc79e"><image class="goods-image data-v-ee1dc79e" src="{{subGoodsItem.goods_attr.pic_url?subGoodsItem.goods_attr.pic_url:subGoodsItem.cover_pic}}"></image></view><view class="box-grow-1 data-v-ee1dc79e"><view class="goods-name data-v-ee1dc79e">{{subGoodsItem.name}}</view><view class="dir-left-wrap attr-list data-v-ee1dc79e"><block a:for="{{subGoodsItem.attr_list}}" a:for-item="attrItem" a:for-index="attrIndex" a:key="attrIndex"><view class="attr-item data-v-ee1dc79e">{{''+attrItem.attr_group_name+":"+attrItem.attr_name+''}}</view></block></view><view class="dir-left-nowrap data-v-ee1dc79e"><view class="box-grow-1 goods-num data-v-ee1dc79e">{{"×"+subGoodsItem.num}}</view><view class="{{(('box-grow-0 goods-price-info data-v-ee1dc79e')+' '+(theme+'-color'))}}"><view class="data-v-ee1dc79e"><block a:for="{{subGoodsItem.custom_currency}}" a:for-item="customCurrency" a:for-index="customCurrencyIndex" a:key="customCurrencyIndex"><text class="data-v-ee1dc79e">{{''+customCurrency+'+'}}</text></block><text class="goods-price-unit data-v-ee1dc79e">￥</text><text class="data-v-ee1dc79e">{{subGoodsItem.total_original_price}}</text></view><block a:for="{{subGoodsItem.discounts}}" a:for-item="discount" a:for-index="discountIndex" a:key="discountIndex"><view class="data-v-ee1dc79e">{{''+discount.name+": "+discount.value+''}}</view></block></view></view></view></view></block></block></view></block><app-diy-form vue-id="{{('15-'+mchIndex+'-'+goodsIndex)+','+('1')}}" list="{{goodsItem.form.value}}" sign="{{mchIndex+','+goodsIndex+','+goodsItem.form.id}}" data-event-opts="{{[['^input',[['handleGoodsFormInput']]],['^validate',[['handleGoodsFormValidate']]]]}}" onInput="__e" onValidate="__e" class="data-v-ee1dc79e" onVueInit="__l"></app-diy-form></view></block></block></block></view></block></view></view></block><view class="data-v-ee1dc79e"><block a:if="{{previewData}}"><view class="submit-bar dir-left-nowrap data-v-ee1dc79e"><view class="{{(('box-grow-1 cross-center order-info data-v-ee1dc79e')+' '+(theme+'-color'))}}"><view style="display:inline-block;" class="data-v-ee1dc79e">{{totalTitle+":"}}</view><block a:for="{{previewData.custom_currency_all}}" a:for-item="custom_currency" a:for-index="__i0__" a:key="*this"><view style="display:inline-block;" class="data-v-ee1dc79e">{{''+custom_currency+'+'}}</view></block><view style="display:inline-block;white-space:nowrap;" class="data-v-ee1dc79e">{{"￥"+previewData.total_price+''}}<view style="content:'  ';display:inline-block;width:20rpx;" class="data-v-ee1dc79e"></view></view></view><block a:if="{{previewData.address_enable&&previewData.price_enable}}"><view data-event-opts="{{[['tap',[['subscribe',['$event']]]]]}}" class="{{((('submit-btn box-grow-0 cross-center data-v-ee1dc79e')+' '+(theme+'-background'))+' '+(submitLock?'lock':''))}}" onTap="__e"><view style="background-color:transparent;color:#ffffff;" class="data-v-ee1dc79e">提交</view></view></block><block a:else><block a:if="{{!previewData.address_enable}}"><view class="{{(('submit-btn box-grow-0 cross-center disabled data-v-ee1dc79e')+' '+(theme+'-background'))}}"><view style="background-color:transparent;" class="data-v-ee1dc79e">该地区无货</view></view></block><block a:else><view class="{{(('submit-btn box-grow-0 cross-center disabled data-v-ee1dc79e')+' '+(theme+'-background'))}}"><view style="background-color:transparent;" class="data-v-ee1dc79e">未达起送要求</view></view></block></block></view></block></view></app-layout>